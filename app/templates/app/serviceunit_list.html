{% extends 'app/base.html' %}
{% block content %}
{% load static %}
{% load i18n %}

<section class="withBackgroundColor">
    <div class="section section-search">
        <div>
            <div class="section-content mb-6">
                <h3 class="heading font-md font-bold withSecondaryColor mb-1">Esti curios unde gasesti ceva ?</h3>
                <h1 class="heading font-1xl font-bold withPrimaryColor mb-2">Unde gasesc e aici sa te ajute</h1>
                <p>
                    Pentru ca stim cat e de greu sa gasesti lucruri sau servicii de care ai nevoie in aceasta perioada, noi am incercat sa punem totul intr-un singur loc.
                    <br>
                    Stii si tu un loc in care se pot gasi lucruri sau care ofera anumite servicii?
                    <a class="btn btn-primary" href="{% url 'service-unit-create' %}">Anunta-ne</a>
                </p>
            </div>
            <form method="get" class="section-search-form">
                <div class="form-group">
                    <label class="font-lg font-primary withPrimaryColor font-bold mb-1 pl-1">Unde gasesc</label>
                    {{ filter.form.tags__contains }}
                </div>
                <div class="form-group-wrapper">
                    <div class="form-group">
                        <label class="font-lg font-primary withPrimaryColor font-bold mb-1 pl-1">la:</label>
                        {{ filter.form.category }}
                    </div>
                    <div class="form-group">
                        <label class="font-lg font-primary withPrimaryColor font-bold mb-1 pl-1">in:</label>
                        {{ filter.form.location }}
                    </div>
                </div>
                <button class="btn btn-primary" type="submit">Cauta</button>
                <button class="btn btn-secondary" id="clear_filters">Sterge filtrele</button>
            </form>
        </div>
        <div class="section-search-icon">
            <img src="{% static 'app/images/icon.svg' %}" class="img-fluid" alt="">
        </div>
    </div>
</section>

<section class="px-15">
    <div class="section section-results-counter">
        <div class="section-results-counter-labels">
            <h1 class="heading font-1xl font-bold withPrimaryColor mb-0">Momentan avem date pentru:</h1>
            <i>Ultima actualizare: <strong>{% language 'ro-ro' %} {{ filter.qs.first.created_at}} {% endlanguage %}</strong></i>
        </div>
        <div class="section-results-item section-results-category">
            <img src="{% static 'app/images/hotel.svg' %}" class="img-fluid" alt="">
            <div>
                <h2 class="m-0 heading font-1xl font-bold withCategoriesColor">{{ filter.form.location|length|add:"-1" }}</h2>
                <p class="mb-0">locatii</p>
            </div>
        </div>
        <div class="section-results-item section-results-cities">
            <img src="{% static 'app/images/category.svg' %}" class="img-fluid" alt="">
            <div>
                <h2 class="m-0 heading font-1xl font-bold withCitiesColor">{{ filter.form.category|length|add:"-1"}}</h2>
                <p class="mb-0">categorii</p>
            </div>
        </div>
    </div>
</section>

<section class="section section-search-results">
    {% if filter.qs|length == 0 %}
    <h1>Nu avem niciun rezultat pentru filtrele aplicate ðŸ˜¥</h1>

    {% else %}

    <ul class="search-results-items">
        {% for service_unit in filter.qs %}
        <li class="search-item">
            <img alt="" src="{{ service_unit.image.url }}">
            <ul class="tag-list mb-1">
                <li class="tag-item">{{ service_unit.location }}</li>
                <li class="tag-item">{{ service_unit.category }}</li>
                <li class="tag-item">{{ service_unit.tags }}</li>
            </ul>
            <h3 class="font-1xl font-primary withPrimaryColor font-bold mb-3 mt-0 text-center">{{ service_unit.name }}</h3>
            <p class="schedule">
                <img src="{% static 'app/images/calendar.svg' %}" class="img-fluid" alt="">
                {{ service_unit.schedule }}
            </p>
            <p class="verify">
                {% if service_unit.verified == True %}
                    <img src="{% static 'app/images/check.svg' %}" alt="">
                    Verificat
                {% else %}
                    <img src="{% static 'app/images/cancel.svg' %}" alt="">
                    Neverificat
                {% endif %}

            </p>
            <div class="text-center">
                <a href="{{ service_unit.link }}" class="btn btn-secondary" target="_blank">Detalii suplimentare</a>
            </div>
        </li>
        {% endfor %}
    </ul>

    {% endif %}
</section>

{% endblock %}
